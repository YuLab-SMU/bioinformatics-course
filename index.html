<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘æ’­æ”¾åˆ—è¡¨</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .container {
            display: flex;
            flex: 1;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            overflow: hidden; /* é˜²æ­¢æº¢å‡º */
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .video-section {
            flex: 2;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background-color: #000;
        }

        video {
            width: 100%;
            max-height: 100%;
            border-radius: 4px;
            outline: none;
        }

        .list-section {
            flex: 1;
            border-left: 1px solid #eee;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .list-header {
            padding: 15px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
            font-weight: bold;
        }

        #video-list {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            flex: 1;
        }

        .video-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }

        .video-item:hover {
            background-color: #f0f8ff;
        }

        .video-item.active {
            background-color: #e6f7ff;
            color: #1890ff;
            border-left: 3px solid #1890ff;
        }

        .video-item .icon {
            margin-right: 10px;
        }

        #current-video-title {
            color: #fff;
            margin-top: 10px;
            font-size: 1.1em;
            text-align: center;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                overflow: auto; /* å…è®¸æ•´ä½“æ»šåŠ¨ */
            }
            
            .video-section {
                flex: none; /* è®©è§†é¢‘åŒºåŸŸè‡ªé€‚åº”å†…å®¹ */
            }

            .list-section {
                flex: 1;
                border-left: none;
                border-top: 1px solid #eee;
                max-height: 500px; /* é™åˆ¶åˆ—è¡¨é«˜åº¦ */
            }
            
            body {
                height: auto;
                min-height: 100vh;
            }
        }
    </style>
</head>
<body>

    <h1>ç”Ÿç‰©ä¿¡æ¯å­¦-ç ”ç©¶ç”Ÿè¯¾ç¨‹</h1>

    <div class="container">
        <div class="video-section">
            <video id="main-player" controls playsinline>
                <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ HTML5 è§†é¢‘ã€‚</p>
            </video>
            <div id="current-video-title">è¯·é€‰æ‹©è§†é¢‘æ’­æ”¾</div>
        </div>
        <div class="list-section">
            <div class="list-header">è§†é¢‘åˆ—è¡¨</div>
            <ul id="video-list">
                <!-- åˆ—è¡¨é¡¹å°†ç”± JS åŠ¨æ€ç”Ÿæˆ -->
                <li style="padding: 15px; color: #666;">æ­£åœ¨åŠ è½½è§†é¢‘åˆ—è¡¨...</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoListContainer = document.getElementById('video-list');
            const player = document.getElementById('main-player');
            const titleDisplay = document.getElementById('current-video-title');
            
            // åŠ è½½ JSON æ•°æ®
            fetch('videos.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('æ— æ³•åŠ è½½è§†é¢‘åˆ—è¡¨æ–‡ä»¶ videos.json');
                    }
                    return response.json();
                })
                .then(videos => {
                    renderList(videos);
                    if (videos.length > 0) {
                        // é»˜è®¤ä¸è‡ªåŠ¨æ’­æ”¾ï¼ŒåªåŠ è½½ç¬¬ä¸€ä¸ªèµ„æºï¼Œæˆ–è€…ç­‰å¾…ç”¨æˆ·ç‚¹å‡»
                        // loadVideo(videos[0], 0); 
                        // ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå¯ä»¥åŠ è½½ä½†ä¸æ’­æ”¾ï¼Œæˆ–è€…ä»€ä¹ˆéƒ½ä¸åš
                        // è¿™é‡Œæˆ‘ä»¬é€‰æ‹©åŠ è½½ç¬¬ä¸€ä¸ªè§†é¢‘ä½†ä¸è‡ªåŠ¨æ’­æ”¾
                        loadVideo(videos[0], 0, false);
                    } else {
                        videoListContainer.innerHTML = '<li style="padding: 15px;">æš‚æ— è§†é¢‘</li>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    videoListContainer.innerHTML = `<li style="padding: 15px; color: red;">åŠ è½½å¤±è´¥: ${error.message}</li>`;
                });

            let activeIndex = -1;

            function renderList(videos) {
                videoListContainer.innerHTML = '';
                videos.forEach((video, index) => {
                    const li = document.createElement('li');
                    li.className = 'video-item';
                    li.innerHTML = `
                        <span class="icon">ğŸ¬</span>
                        <span class="name">${video.name}</span>
                    `;
                    li.onclick = () => loadVideo(video, index, true);
                    videoListContainer.appendChild(li);
                });
            }

            function loadVideo(video, index, autoPlay) {
                // æ›´æ–°æ’­æ”¾å™¨æº
                player.src = video.path;
                titleDisplay.textContent = video.name;
                
                // æ›´æ–°åˆ—è¡¨é€‰ä¸­çŠ¶æ€
                const items = videoListContainer.getElementsByClassName('video-item');
                if (activeIndex >= 0 && items[activeIndex]) {
                    items[activeIndex].classList.remove('active');
                }
                if (items[index]) {
                    items[index].classList.add('active');
                }
                activeIndex = index;

                // æ’­æ”¾
                if (autoPlay) {
                    player.play().catch(e => console.log('è‡ªåŠ¨æ’­æ”¾è¢«æ‹¦æˆªæˆ–å¤±è´¥:', e));
                }
            }
        });
    </script>
</body>
</html>
